---
# install, & update Homebrew and Homebrew cask
- name: check if Homebrew is installed
  command: 'brew -v'
  register: homebrew_installed
  failed_when: homebrew_installed.rc > 1

- name: install homebrew
  shell: 'yes | /usr/bin/ruby -e "$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/install)"'
  args:
      creates: /usr/local/bin/brew
  when: homebrew_installed.rc > 1

- name: update Homebrew
  homebrew:
      state: latest
      update_homebrew: yes

- name: tap caskroom/cask
  homebrew_tap:
      tap: 'caskroom/cask'

